<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
        />

        <!-- Metas -->
        <title>PingPongPlane 类 - curtains.js 中文网</title>
        <meta
            name="description"
            content="curtains.js is a lightweight vanilla WebGL javascript library that turns HTML DOM elements into interactive textured planes."
        />
        <link rel="canonical" href="https://www.curtainsjs.com/ping-pong-plane-class.html" />

        <!-- Facebook OG -->
        <meta property="og:title" content="curtains.js | Documentation | PingPongPlane class" />
        <meta property="og:type" content="website" />
        <meta
            property="og:description"
            content="curtains.js is a lightweight vanilla WebGL javascript library that turns HTML DOM elements into interactive textured planes."
        />
        <meta property="og:url" content="https://www.curtainsjs.com/ping-pong-plane-class.html" />
        <meta
            property="og:image"
            content="https://www.curtainsjs.com/images/curtains-js-logo.jpg"
        />

        <!-- Twitter card -->
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:site" content="@webdesign_ml" />
        <meta name="twitter:creator" content="@webdesign_ml" />
        <meta name="twitter:title" content="curtains.js | Documentation | PingPongPlane class" />
        <meta
            name="twitter:description"
            content="curtains.js is a lightweight vanilla WebGL javascript library that turns HTML DOM elements into interactive textured planes."
        />
        <meta
            name="twitter:image"
            content="https://www.curtainsjs.com/images/curtains-js-logo.jpg"
        />

        <!-- Favicon -->
        <link rel="apple-touch-icon" sizes="180x180" href="images/favicons/apple-touch-icon.png" />
        <link rel="icon" type="image/png" sizes="32x32" href="images/favicons/favicon-32x32.png" />
        <link rel="icon" type="image/png" sizes="16x16" href="images/favicons/favicon-16x16.png" />
        <link rel="manifest" href="images/favicons/site.webmanifest" />
        <link rel="mask-icon" href="images/favicons/safari-pinned-tab.svg" color="#202340" />
        <link rel="shortcut icon" href="images/favicons/favicon.ico" />
        <meta name="msapplication-TileColor" content="#202340" />
        <meta name="msapplication-config" content="images/favicons/browserconfig.xml" />
        <meta name="theme-color" content="#202340" />

        <link href="https://fonts.googleapis.com/css?family=PT+Sans:400,700" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Abril+Fatface" rel="stylesheet" />
        <link
            href="https://fonts.googleapis.com/css?family=Roboto+Mono&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="style.css" type="text/css" />
    </head>
    <body>
        <div id="page-wrap">
            <div id="canvas"></div>

            <div id="content">
                <header id="header">
                    <div class="wrapper">
                        <div id="header-wrapper" class="flex-wrapper">
                            <div id="header-title">
                                <a href="./" title="Home">curtains.js 中文网</a>
                            </div>
                            <nav id="main-menu">
                                <ul class="flex-wrapper">
                                    <li>
                                        <a href="get-started.html">入门指南</a>
                                    </li>
                                    <li>
                                        <a href="documentation.html" class="active">文档</a>
                                    </li>
                                    <li>
                                        <a href="download.html">下载</a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </header>

                <section class="content-section api-section">
                    <nav id="api-menu-nav">
                        <ul id="api-menu">
                            <li>
                                <div class="api-top-menu-item">核心</div>
                                <ul class="api-submenu-content">
                                    <li>
                                        <a href="curtains-class.html">Curtains</a>
                                    </li>
                                    <li>
                                        <a href="plane-class.html">平面（Plane）</a>
                                    </li>
                                    <li>
                                        <a href="texture-class.html">纹理（Texture）</a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <div class="api-top-menu-item">帧缓冲区对象</div>
                                <ul class="api-submenu-content">
                                    <li>
                                        <a href="render-target-class.html"
                                            >渲染目标（RenderTarget）</a
                                        >
                                    </li>
                                    <li>
                                        <a href="shader-pass-class.html"
                                            >着色器通道（ShaderPass）</a
                                        >
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <div class="api-top-menu-item">加载器</div>
                                <ul class="api-submenu-content">
                                    <li>
                                        <a href="texture-loader-class.html"
                                            >纹理加载器（TextureLoader）</a
                                        >
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <div class="api-top-menu-item">数学工具</div>
                                <ul class="api-submenu-content">
                                    <li>
                                        <a href="vec-2-class.html">二维向量（Vec2）</a>
                                    </li>
                                    <li>
                                        <a href="vec-3-class.html">三维向量（Vec3）</a>
                                    </li>
                                    <li>
                                        <a href="mat-4-class.html">四维矩阵（Mat4）</a>
                                    </li>
                                    <li>
                                        <a href="quat-class.html">四元数（Quat）</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="active">
                                <div class="api-top-menu-item">额外组件</div>
                                <ul class="api-submenu-content">
                                    <li class="active">
                                        <a href="ping-pong-plane-class.html"
                                            >乒乓渲染平面（PingPongPlane）</a
                                        >

                                        <div class="api-submenu-content">
                                            <div class="api-submenu-title">
                                                <a href="ping-pong-plane-class.html#basic-usage"
                                                    >基本使用</a
                                                >
                                            </div>
                                            <div class="api-submenu-title">
                                                <a href="ping-pong-plane-class.html#parameters"
                                                    >参数</a
                                                >
                                            </div>
                                            <div class="api-submenu-title">
                                                <a href="ping-pong-plane-class.html#properties"
                                                    >属性</a
                                                >
                                            </div>
                                            <ul class="api-submenu">
                                                <li>
                                                    <a href="ping-pong-plane-class.html#read-pass"
                                                        >readPass</a
                                                    >
                                                </li>
                                                <li>
                                                    <a href="ping-pong-plane-class.html#write-pass"
                                                        >writePass</a
                                                    >
                                                </li>
                                            </ul>
                                            <div class="api-submenu-title">
                                                <a href="ping-pong-plane-class.html#methods"
                                                    >方法</a
                                                >
                                            </div>
                                            <ul class="api-submenu">
                                                <li>
                                                    <a href="ping-pong-plane-class.html#get-texture"
                                                        >getTexture</a
                                                    >
                                                </li>
                                            </ul>
                                        </div>
                                    </li>
                                    <li>
                                        <a href="fxaa-pass-class.html"
                                            >FXAA抗锯齿通道（FXAAPass）</a
                                        >
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </nav>

                    <div id="api-content">
                        <div class="api-content-inner">
                            <div class="inner-section">
                                <h1>PingPongPlane 类</h1>

                                <div class="api-item-examples">
                                    <a
                                        href="https://github.com/martinlaxenaire/curtainsjs/blob/master/src/extras/PingPongPlane.js"
                                        title="PingPongPlane class source code"
                                        target="_blank"
                                        >源码</a
                                    >
                                </div>

                                <h2 id="basic-usage">基本使用</h2>
                                <p>
                                    PingPongPlane
                                    类用于创建一个平面以及两个相关的渲染目标，这两个目标将在每次绘制调用时进行交换。这种方法被称为
                                    FBO 交换或 FBO
                                    乒乓技术，并常被用来实现流体效果或其他如流动贴图等特效。<br />
                                    PingPongPlane 类<strong>继承</strong>自
                                    <a href="plane-class.html">Plane</a>
                                    类，从而继承了其所有的方法和属性。
                                </p>

                                <h3>创建</h3>
                                <p>
                                    要创建一个新的 PingPongPlane 对象，只需使用其构造函数。<br />
                                    由于它继承自 Plane
                                    类，因此参数几乎相同。不过，它还包含一个额外的参数，<strong>允许您设置在片段着色器中读取以应用特效的纹理采样器名称</strong>。如果不指定，默认会使用
                                    "uPingPongTexture" 作为采样器名称。<br />
                                    请注意，乒乓平面是渲染到渲染目标上的，因此您需要创建另一个平面来展示特效的结果。
                                </p>

                                <div class="code">
                                    <div class="code-block">
                                        <div class="code-comment">
                                            // “canvas” 是我们的 HTML 容器元素的 ID
                                        </div>
                                        <div>
                                            <span class="code-var">const</span> curtains =
                                            <span class="code-var">new</span>
                                            <span class="code-tag">Curtains</span>({
                                            <div class="code-indent">
                                                <span class="code-property">container</span>:
                                                <span class="code-string">"canvas"</span>
                                            </div>
                                            })<span class="code-var">;</span>
                                        </div>
                                    </div>

                                    <div class="code-block">
                                        <div class="code-comment">
                                            // 获取用于乒乓平面的HTML元素
                                        </div>
                                        <span class="code-var">const</span> pingPongPlaneElement =
                                        document.<span class="code-tag">getElementById</span>(<span
                                            class="code-string"
                                            >"my-ping-pong-plane"</span
                                        >)<span class="code-var">;</span>
                                    </div>

                                    <div class="code-block">
                                        <div class="code-comment">// 设置乒乓平面参数</div>
                                        <div><span class="code-var">const</span> params = {</div>
                                        <div class="code-indent">
                                            <div>
                                                <span class="code-property">vertexShaderID</span>:
                                                <span class="code-string">"ping-pong-vs"</span
                                                ><span class="code-var">,</span>
                                                <span class="code-comment"
                                                    >// 顶点着色器script标签的ID
                                                </span>
                                            </div>
                                            <div>
                                                <span class="code-property">fragmentShaderID</span>:
                                                <span class="code-string">"ping-pong-fs"</span
                                                ><span class="code-var">,</span>
                                                <span class="code-comment"
                                                    >// 片段着色器script标签的ID</span
                                                >
                                            </div>
                                            <div>
                                                <span class="code-property">sampler</span>:
                                                <span class="code-string">"uTexture"</span
                                                ><span class="code-var">,</span>
                                                <span class="code-comment"
                                                    >在片段着色器中使用的采样器名称，默认为
                                                    "uPingPongTexture"</span
                                                >
                                            </div>
                                            <div>
                                                <span class="code-property">uniforms</span>: {
                                                <span class="code-comment"
                                                    >// uniforms 变量是与平面交互的方式</span
                                                >
                                            </div>
                                            <div class="code-indent">
                                                <div>
                                                    <span class="code-property">time</span>: {
                                                </div>
                                                <div class="code-indent">
                                                    <div>
                                                        <span class="code-property">name</span>:
                                                        <span class="code-string">"uTime"</span
                                                        ><span class="code-var">,</span>
                                                        <span class="code-comment"
                                                            >// 将传递给着色器的 uniforms
                                                            变量名</span
                                                        >
                                                    </div>
                                                    <div>
                                                        <span class="code-property">type</span>:
                                                        <span class="code-string">"1f"</span
                                                        ><span class="code-var">,</span>
                                                        <span class="code-comment"
                                                            >// 表示我们的 uniforms
                                                            变量是一个浮点数</span
                                                        >
                                                    </div>
                                                    <div>
                                                        <span class="code-property">value</span>:
                                                        <span class="code-number">0</span
                                                        ><span class="code-var">,</span>
                                                        <span class="code-comment"
                                                            >// uniforms 的初始值</span
                                                        >
                                                    </div>
                                                </div>
                                                <div>}<span class="code-var">,</span></div>
                                            </div>
                                            <div>}<span class="code-var">,</span></div>
                                        </div>
                                        <div>}<span class="code-var">;</span></div>
                                    </div>

                                    <div class="code-block">
                                        <div class="code-comment">// 使用上述参数创建乒乓平面</div>
                                        <div>
                                            <span class="code-var">const</span> pingPongPlane =
                                            <span class="code-var">new</span>
                                            <span class="code-tag">PingPongPlane</span
                                            >(curtains<span class="code-var">,</span>
                                            pingPongPlaneElement<span class="code-var">,</span>
                                            params)<span class="code-var">;</span>
                                        </div>
                                    </div>

                                    <div class="code-block">
                                        <div class="code-comment">
                                            // 创建一个平面以展示乒乓效果的结果
                                        </div>
                                        <span class="code-var">const</span> planeElement =
                                        document.<span class="code-tag">getElementById</span>(<span
                                            class="code-string"
                                            >"my-plane"</span
                                        >)<span class="code-var">;</span>
                                    </div>

                                    <div class="code-block">
                                        <span class="code-var">const</span> plane =
                                        <span class="code-var">new</span>
                                        <span class="code-tag">Plane</span>(curtains<span
                                            class="code-var"
                                            >,</span
                                        >
                                        planeElement)<span class="code-var">;</span>
                                    </div>

                                    <div>
                                        <div class="code-comment">
                                            // 创建一个纹理，该纹理将包含乒乓效果的结果
                                        </div>
                                        <span class="code-var">const</span> pingPongTexture =
                                        plane.<span class="code-tag">createTexture</span>({
                                        <div class="code-indent">
                                            <div>
                                                <span class="code-property">sampler</span>:
                                                <span class="code-string">"uTexture"</span
                                                ><span class="code-var">,</span>
                                            </div>
                                            <div>
                                                <span class="code-property">fromTexture</span>:
                                                pingPongPlane.<span class="code-tag"
                                                    >getTexture</span
                                                >()
                                            </div>
                                        </div>
                                        })<span class="code-var">;</span>
                                    </div>
                                </div>

                                <p>
                                    <strong>示例：</strong>
                                    <a
                                        href="examples/ping-pong-shading-flowmap/index.html"
                                        title="Ping pong shading flowmap"
                                        target="_blank"
                                        >Ping pong shading flowmap</a
                                    >
                                </p>

                                <h2 id="parameters">参数</h2>
                                <p>
                                    PingPongPlanes 类在创建时使用的参数与常规的
                                    <a href="plane-class.html#parameters">Plane类参数</a>
                                    相同。但是请注意，PingPongPlanes 默认会将
                                    <strong>depthTest（深度测试）</strong> 和
                                    <strong>autoloadSources（自动加载资源）</strong> 属性设置为
                                    <strong>false</strong>。<br />
                                    此外，您还可以传递一个额外的纹理采样器名称作为参数：
                                </p>
                                <ul class="api-item-parameters">
                                    <li>
                                        <span class="api-item-parameter-label"> sampler </span>
                                        <span class="api-item-parameter-type"> string，可选 </span>
                                        <span class="api-item-parameter-desc">
                                            在片段着色器中用于创建特效的纹理采样器名称。默认值为
                                            "uPingPongTexture"。
                                        </span>
                                    </li>
                                </ul>

                                <h2 id="properties">属性</h2>
                                <p>
                                    PingPongPlanes 类同样继承了常规
                                    <a href="plane-class.html#properties">Plane类的所有属性</a
                                    >。除此之外，它们还额外提供了两个用于渲染目标（RenderTarget）的属性：
                                </p>
                                <ul>
                                    <li id="read-pass">
                                        <p>
                                            <strong>readPass</strong> (<a
                                                href="render-target-class.html"
                                                >RenderTarget</a
                                            >
                                            class object):
                                            <span class="api-item-version">v7.0</span>
                                        </p>
                                        <p>
                                            渲染目标读取通道，在每次绘制调用时会与写入通道进行交换。它的
                                            <strong>depth</strong> 和
                                            <strong>clear</strong> 属性均设置为
                                            <strong>false</strong>
                                        </p>
                                    </li>
                                    <li id="write-pass">
                                        <p>
                                            <strong>writePass</strong> (<a
                                                href="render-target-class.html"
                                                >RenderTarget</a
                                            >
                                            class object):
                                            <span class="api-item-version">v7.0</span>
                                        </p>
                                        <p>
                                            渲染目标写入通道，在每次绘制调用时会与读取通道进行交换。它的
                                            <strong>depth</strong> 和
                                            <strong>clear</strong> 属性也同样被设置为
                                            <strong>false</strong>
                                        </p>
                                    </li>
                                </ul>

                                <h2 id="methods">方法</h2>
                                <ul>
                                    <li id="get-texture">
                                        <p>
                                            <strong>getTexture</strong>():
                                            <span class="api-item-version">v7.0</span>
                                        </p>
                                        <p>
                                            返回用于后续使用的乒乓平面纹理。这个方法获取的是在多次渲染交换过程中产生的最终结果纹理。
                                        </p>
                                        <p>
                                            <strong>返回值：</strong>一个乒乓平面的
                                            <a href="texture-class.html">texture纹理对象</a
                                            >，该纹理包含了所有渲染操作完成后写入通道（writePass）的内容。
                                        </p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </body>
</html>
